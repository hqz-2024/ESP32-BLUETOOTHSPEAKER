# PCA9554 硬件检查清单

## 📋 检查项目

### 1️⃣ INT 引脚连接检查

#### 物理连接
- [ ] GPIO2 连接线是否牢固
- [ ] PCA9554 INT 引脚连接线是否牢固
- [ ] 连接线是否有断裂或损伤
- [ ] 焊点是否有冷焊或虚焊

#### 电压测试
```
用万用表测量 INT 引脚电压：
- [ ] 空闲时电压 = 3.3V（HIGH）
- [ ] 改变 IO 时电压 = 0V（LOW）
- [ ] 恢复时电压 = 3.3V（HIGH）
```

#### 信号观察
```
用示波器观察 INT 引脚波形：
- [ ] 能看到下降沿
- [ ] 下降沿清晰，无毛刺
- [ ] 恢复时间合理（<100ms）
```

---

### 2️⃣ 上拉电阻检查

#### INT 引脚上拉
```
硬件要求：
- [ ] INT 引脚有 4.7kΩ 上拉电阻
- [ ] 上拉电阻连接到 3.3V
- [ ] 上拉电阻焊接正确

测试方法：
- [ ] 用万用表测量上拉电阻两端
  - 一端应该是 3.3V
  - 另一端应该是 INT 引脚
- [ ] 测量电阻值是否为 4.7kΩ
```

#### I2C 总线上拉
```
硬件要求：
- [ ] SDA 有 4.7kΩ 上拉电阻到 3.3V
- [ ] SCL 有 4.7kΩ 上拉电阻到 3.3V
- [ ] 上拉电阻焊接正确

测试方法：
- [ ] 用万用表测量 SDA 空闲时电压 = 3.3V
- [ ] 用万用表测量 SCL 空闲时电压 = 3.3V
- [ ] 用示波器观察 I2C 波形是否正常
```

---

### 3️⃣ 电源和接地检查

#### 电源连接
```
- [ ] PCA9554 VDD 连接到 3.3V
- [ ] PCA9554 GND 连接到 GND
- [ ] 电源连接线牢固
- [ ] 电源电压稳定（用万用表测量）
```

#### 接地连接
```
- [ ] PCA9554 GND 连接到 ESP32 GND
- [ ] 接地连接线牢固
- [ ] 没有浮地现象
```

#### 去耦电容
```
- [ ] PCA9554 VDD 附近有 0.1µF 去耦电容
- [ ] 去耦电容焊接正确
- [ ] 去耦电容靠近 VDD 引脚
```

---

### 4️⃣ I2C 总线检查

#### 连接检查
```
- [ ] SDA (GPIO4) 连接到 PCA9554 SDA
- [ ] SCL (GPIO15) 连接到 PCA9554 SCL
- [ ] 连接线牢固
- [ ] 没有短路
```

#### 地址配置检查
```
- [ ] A2 引脚接地（GND）
- [ ] A1 引脚接地（GND）
- [ ] A0 引脚接地（GND）
- [ ] 地址应该是 0x38（7位）
```

#### 总线质量检查
```
用示波器观察 I2C 波形：
- [ ] SDA 和 SCL 波形清晰
- [ ] 没有毛刺或干扰
- [ ] 上升沿和下降沿平缓
- [ ] 总线空闲时都是 HIGH
```

---

### 5️⃣ GPIO2 检查

#### 引脚配置
```
- [ ] GPIO2 没有被其他功能占用
- [ ] GPIO2 没有被其他库使用
- [ ] GPIO2 配置为 INPUT_PULLUP
```

#### 电压测试
```
- [ ] GPIO2 空闲时电压 = 3.3V
- [ ] GPIO2 接收中断时电压 = 0V
- [ ] GPIO2 恢复时电压 = 3.3V
```

#### 连接检查
```
- [ ] GPIO2 连接线牢固
- [ ] GPIO2 连接线没有损伤
- [ ] GPIO2 没有接其他设备
```

---

### 6️⃣ PCA9554 芯片检查

#### 芯片状态
```
- [ ] 芯片没有烧焦或损伤
- [ ] 芯片焊接正确，没有虚焊
- [ ] 芯片引脚没有弯曲或断裂
```

#### 功能检查
```
- [ ] I2C 通讯正常（初始化成功）
- [ ] 能读取输入寄存器
- [ ] 能读取配置寄存器
- [ ] 能读取输出寄存器
```

#### 极性检查
```
- [ ] 输入引脚没有反向
- [ ] 输入信号极性正确
- [ ] 没有启用极性反转
```

---

## 🔧 测试工具

### 必需工具
- [ ] 万用表（测量电压和电阻）
- [ ] 示波器（观察波形）
- [ ] 连接线和杜邦线

### 可选工具
- [ ] 逻辑分析仪（分析 I2C 和中断信号）
- [ ] USB 转 I2C 工具（独立测试 I2C）

---

## 📊 测试数据记录

### 电压测试记录

| 测试点 | 预期值 | 实际值 | 状态 |
|--------|--------|--------|------|
| INT 引脚（空闲） | 3.3V | ___ | ☐ |
| INT 引脚（变化时） | 0V | ___ | ☐ |
| GPIO2（空闲） | 3.3V | ___ | ☐ |
| SDA（空闲） | 3.3V | ___ | ☐ |
| SCL（空闲） | 3.3V | ___ | ☐ |
| VDD | 3.3V | ___ | ☐ |
| GND | 0V | ___ | ☐ |

### 电阻测试记录

| 电阻 | 预期值 | 实际值 | 状态 |
|------|--------|--------|------|
| INT 上拉 | 4.7kΩ | ___ | ☐ |
| SDA 上拉 | 4.7kΩ | ___ | ☐ |
| SCL 上拉 | 4.7kΩ | ___ | ☐ |

### 功能测试记录

| 测试项 | 预期结果 | 实际结果 | 状态 |
|--------|---------|---------|------|
| I2C 初始化 | 成功 | ___ | ☐ |
| PCA9554 初始化 | 成功 | ___ | ☐ |
| 读取输入寄存器 | 成功 | ___ | ☐ |
| 中断触发 | 是 | ___ | ☐ |
| IO 变化检测 | 成功 | ___ | ☐ |

---

## 🚨 常见问题

### Q: INT 引脚电压不是 3.3V
**A:** 检查上拉电阻是否存在和焊接正确

### Q: I2C 初始化失败
**A:** 检查 SDA/SCL 连接和上拉电阻

### Q: 中断从不触发
**A:** 检查 GPIO2 连接和 INT 引脚电压

### Q: 中断触发但无法读取数据
**A:** 检查 I2C 通讯是否正常

### Q: 偶发性失败
**A:** 检查连接线是否牢固，是否有干扰

---

## ✅ 检查完成清单

- [ ] 所有物理连接已检查
- [ ] 所有电压测试已完成
- [ ] 所有电阻测试已完成
- [ ] 所有功能测试已完成
- [ ] 所有数据已记录
- [ ] 问题已识别
- [ ] 问题已解决
- [ ] 功能已验证

---

## 📝 检查结论

**检查日期**：___________

**检查人员**：___________

**发现的问题**：
```
1. _________________________________
2. _________________________________
3. _________________________________
```

**采取的措施**：
```
1. _________________________________
2. _________________________________
3. _________________________________
```

**检查结果**：
- [ ] 正常，无问题
- [ ] 发现问题，已解决
- [ ] 发现问题，待解决

**备注**：
```
_________________________________
_________________________________
_________________________________
```

